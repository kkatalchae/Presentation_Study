# 주요 클라우드 서비스


<img width="721" alt="스크린샷 2024-08-31 오후 11 04 16" src="https://github.com/user-attachments/assets/7f4d808a-7716-4be8-b8a0-afd62e9c46e5">

<img width="838" alt="스크린샷 2024-08-31 오후 10 58 29" src="https://github.com/user-attachments/assets/9d8988b1-190a-4902-ad36-af1695939e87">

<img width="721" alt="스크린샷 2024-08-31 오후 11 04 26" src="https://github.com/user-attachments/assets/d9aa720d-814f-4b2b-8528-a687825c1d8c">

### AWS : **운영자** 시각에서 설계된 클라우드 플랫폼

- 네트워크 관리, 세분화된 ID 및 액세스 관리(IAM), 로드 밸런서, 기반 하드웨어에 인스턴스를 배치하는 방법을 제어하기 위한 배치 그룹 등 
- **운영 담당자**가 선호하는 모든 저수준 프리미티브를 제공
- ‘전통적인 온프레미스를 다른 업체의 데이터 센터에 증축하는 것’이라고 생각하면 대략 맞다


**강점**
- **여러 선택권**과 **SLA**를 제공하는 것
- 고객이 원하는 대로 거의 모든 것을 구축하고, 안정성 높은 개별 기능을 경험할 수 있다
    
**단점**  
- 전체적인 통합성, 소프트웨어 개발자에게는 문제가 될 수 있는 부분
    

### GCP : **소프트웨어** **엔지니어** 시각에서 설계된 클라우드 플랫폼

- ‘클라우드 중에서 최상의 관리형 서비스를 제공’하는 것을 목표
- 초기 구글 앱 엔진(App Engine)과 함께 **서비스형 플랫폼**으로 시작한 만큼 지향점이 명확
- 소프트웨어 엔지니어라면 전통적인 **운영팀의 업무**를 구글 클라우드로 **대체**할 수 있다

**강점**  
- 구글 클라우드의 핵심은 사용하기 쉽다
- 몇 개의 강력한 제품이 규모에 상관없이 수요가 높으며, 다른 서비스까지 잘 통합시킨다. 
- 지향점이 뚜렷한 구글의 기술 접근 방식에 동의한다면 사용자도 편히 사용할 수 있지만, 그렇지 않는다면 주의해서 기술을 사용해야. 
    
**단점**
- 그 방식을 벗어나 다른 것을 만드는 경우 매우 어렵다. 
- GCP는 깔끔하고 잘 정돈돼 있으며 사실상 한 가지 방법으로 모든 문제를 해결한다. 
- **즉, 90%의 문제에 대해서는 매우 효과적으로 처리할 수 있지만, 나머지 10%에는 매우 답답할 수 있다**
    

### 애저 : **기업 IT 담당자**의 시각에서 설계된 클라우드 플랫폼
- 윈도우가 갔던 길을 악착같이 유지
- 애저는 온프레미스 리소스를 보완하고자 할 때 좋다. 마이크로소프트 입장이라면 누구나 거기서부터 출발하지 않겠는가? 
- 기존 윈도우 고객이 클라우드로 가는 길을 찾도록 돕는 것도 의미가 있다. 
- ‘애저가 윈도우 생태계에서 벗어났던 기업에도 매력적인가’에 대한 대답은 ‘그렇다’ 쪽으로 기울고 있다. 
- 마이크로소프트가 솔루션의 핵심을 고객에 두고 있다는 점도 이유 중 하나다. AWS는 이런 부분에서 어려움을 겪어왔다”라고 말했다.
- 애저가 엔터프라이즈와 정부에 매우 집중하고 있으며 두 분야 모두 주로 윈도우 환경을 사용한다는 점을 강조
- IT 부서가 회사 내의 기술을 이끌며 클라우드 도입을 막 시작하는 단계에 있는 기업(현재 클라우드/SaaS 비중이 미미한 기업)에 좋다
- 또한 소프트웨어와는 거의 무관하지만 CFO를 위한 통합 협상과 여러 해 동안 거래해야 한다는 구조가 필요한 점까지 고려하면 애저가 매우 합리적인 길이 된다. 
- 이러한 의견을 종합할 때 애저는 IT 의사 결정자를 염두에 두고 시작하고 이를 반영해 클라우드 기술을 만든다는 인상을 준다.

### 시장 점유율
<img width="721" alt="스크린샷 2024-08-31 오후 10 59 03" src="https://github.com/user-attachments/assets/97200c7e-60b9-4c6e-b447-5eb7705e1bac">

- AWS
    - 2024년 1분기 250억 달러(325조) 매출
    - AWS가 다른 많은 클라우드 제공업체들보다 훨씬 이전에 설립
    - 클라우드 영역 내에서 광범위한 경험과 구현을 자랑
        - AWS만 사용함으로 전체 인프라 스트럭처를 통합 운영을 할 수 있는 최대 장점
- GCP
    - 2023년 92억 달러(12조)의 매출
    - 구글 클라우드 플랫폼(GCP)은 시장에서 자신만의 틈새 시장을 개척
    - GCP의 독특한 이점은 구글 검색, 유튜브 및 기타 구글 제품에 사용되는 동일한 강력한 인프라를 제공
    - 그 외 특징
        - GCP 는 12개월 동안 300달러의 크레딧을 제공
        제공된 크레딧 안에서 자유로운 서비스 이용이 가능하다는 장점
        - 3대 CSP 중에서 가장 늦게 시작했지만 **데이터 분석과 머신 러닝**에 강점
        - 다양한 브라우저에 대한 호환성이 좋고, 사용자 친화적인 대시보드를 제공
- Azure
    - 2010년에 시작한 클라우드 컴퓨팅 플랫폼
    - Azure 는 **윈도우 플랫폼**에 강함
        - 전세계 많은 **기업 및 기관**들이 윈도우 및 오피스와 같은 마이크로소프트의 소프트웨어를 사용하기 때문
    - Azure 는 가장 많은 56개의 글로벌 리전을 운영하고 있으며 국내에서는 서울, 부산 리전으로 원격 센터 간 DR (Disaster Recovery) 구성이 장점이며, 리전 내에는 가용 영역 대신 동일 센터 내 가용 셋 이중화 형태로 구성


### 컴퓨팅 서비스

**AWS** 

- **EC2 (Elastic Comput Cloud):** AWS의 EC2는 사용자가 다양한 워크로드에 최적화된 다양한 인스턴스 유형을 선택할 수 있도록 확장 가능한 가상 서버를 제공합니다.
- **Lambda:** 이 서비스는 서버리스 컴퓨팅을 제공하여 인프라를 관리하지 않고도 이벤트에 대응하여 코드를 실행할 수 있습니다. 이벤트 중심 애플리케이션에 이상적입니다.
- **Elastic Beanstalk:** 서비스형 플랫폼(PaaS) 환경을 제공하는 Elastic Beanstalk을 사용하면 기본 인프라의 복잡성에 대처하지 않고도 애플리케이션을 구현, 관리 및 확장할 수 있습니다.
- **Batch:** AWS Batch는 배치 컴퓨팅 워크로드를 처리하고 작업의 분산 및 실행을 효율적으로 관리하기 위해 설계되었습니다.
- **Fargate:** AWS의 컨테이너 제품 중 일부인 Fargate를 사용하면 기본 인프라를 관리하지 않고도 컨테이너를 실행할 수 있습니다.

**구글 클라우드** 

- **Compute Engine:** Compute Engine은 필요에 따라 신속하게 시작하고 확장할 수 있는 맞춤형 가상 머신을 제공합니다.
- **App Engine:** Elastic Beanstalk과 유사한 App Engine은 애플리케이션 배포 및 관리를 간소화하는 PaaS 제품입니다.
- **Cloud Functions:** 구글 클라우드의 서버리스 컴퓨팅 옵션인 클라우드 기능을 사용하면 서버를 프로비저닝하거나 관리하지 않고도 단일 목적의 기능을 실행할 수 있습니다.
- **Kubernetes Engine:** Google의 Kubernetes Engine은 인기 있는 컨테이너 오케스트레이션 플랫폼인 Kubernetes를 사용하여 컨테이너화된 애플리케이션의 배포, 관리 및 확장을 단순화합니다.
- **Cloud Run:** 서버리스 구축과 컨테이너형 구축의 독특한 조합을 제공하는 Cloud Run을 사용하면 자동 확장이 가능한 완벽한 관리 환경에서 컨테이너를 실행할 수 있습니다.

# GCP VM에 Docker로 스프링부트 배포

**인프라 환경**

- 클라우드 플랫폼 : **Google Cloud Platform(GCP)**
- 웹 서버 : nginx
- 인스턴스 유형 : **Google Compute Engine**


1. 프로젝트 생성
2. ComputeEngine > VM 인스턴스 생성
3. 인스턴스 설정
    <img width="721" alt="스크린샷 2024-08-31 오후 10 59 35" src="https://github.com/user-attachments/assets/19f54183-8acc-40a5-a92c-232f5ff54067">
    1. 리전
        1. 리전 (아이오와) , 영역 
    2. 머신 구성
        1. e2-micro로 했다가 **medium** 변경
        2. vCPUs, Memory, 플랫폼
    3. 부팅 디스크
        1. 표준 영구 디스크
        2. 운영체제 : 우분투
        3. 버전, 부팅 디스크 유형, 
        4. 크기 30GB이하
        5. VM 프로비저닝 모델 : 스팟
    4. 방화벽
        1. HTTP 트래픽 허용
        2. HTTPS 트래픽 허용
    5. 고정 IP 설정
        1. 인스턴스 연결
    6. 방화벽 설정
        1. 소스 필터
            1. IPv4 범위 0.0.0.0/0
        2. 프로토콜 및 포트
            1. TCP, 8080포트
4. SSH 로 인스턴스 서버 접속
    1. 브라우저로 연결하기
        1. 구글 클라우드에서 자동으로 SSH 키를 보내고 연결을 위한 설정을 해줌
5. 환경설정 
    1. git 설치
    2. 도커, 도커 컴포즈 설치 및 시작
    3. 소스 내려받기
    4. 도커 환경변수 설정
        
        ```php
        vi .env
        i
        복붙
        esc
        :wq
        
        // .env 파일을 생성후 아래 명령어를 통해 값을 확인
        docker-compose config  
        ```
        
    5. **JDK 설치 및 jar 파일 생성 : 스프링부트 java버전과 맞추어 설치**
        
        ```php
        # aws coreetto 다운로드
        $ sudo curl -L https://corretto.aws/downloads/latest/amazon-corretto-11-x64-linux-jdk.rpm -o jdk11.rpm
        
        # jdk17 설치
        $ sudo yum localinstall jdk11.rpm
        ```
        
6. 빌드
    
    ```php
    // 테스트 케이스 제외하고, jar 파일 빌드만 진행
    $ ./gradlew clean build -x test
    ```
    
7. **Docker 이미지 받고 Docker Compose 실행**
```php
docker-compose up --build
```