# 웹 보안

## Token vs Cookie

### 쿠키란?

쿠키는 웹 서버가 생성하여 웹 브라우저로 전송하는 작은 정보 파일입니다. 웹 브라우저는 수신한 쿠키를 미리 정해진 기간 동안 또는 웹 사이트에서의 사용자 세션 기간 동안 저장합니다. 웹 브라우저는 향후 사용자가 웹 서버에 요청할 때 관련 쿠키를 첨부합니다.

쿠키는 HTTP 프로토콜의 일부로 브라우저가 자동으로 HTTP 요청에 포함시켜 전송합니다.

`우선 쿠키는 어디에서 찾아볼 수 있을까?`

브라우저 > 개발자 도구 > 애플리케이션 > 쿠키

![쿠키의 저장 위치](../images/쿠키_저장위치.png)

`쿠키는 어떤 정보들을 가지고 있는가?`

- **이름 (Name)** : 쿠키의 식별자.
- **값 (Value)** : 쿠키에 저장되는 데이터.
- **만료 날짜 (Expiration Date)** : 쿠키의 유효 기간. 이 날짜 이후에는 쿠키가 삭제됩니다.
- **경로 (Path)** : 쿠키가 유효한 URL 경로. 특정 경로에만 쿠키가 전송됩니다.
- **도메인 (Domain)** : 쿠키가 유효한 도메인. 지정된 도메인 및 하위 도메인에만 쿠키가 전송됩니다.
- **보안 플래그 (Secure Flag)** : 쿠키가 HTTPS 연결에서만 전송되도록 설정합니다.
- **HttpOnly 플래그** : 쿠키가 JavaScript를 통해 접근되지 않도록 설정합니다. 이를 통해 XSS(교차 사이트 스크립팅) 공격을 방지할 수 있습니다.
- **SameSite 플래그** : 쿠키의 사이트 간 요청 전송 방식을 제어합니다. 이 플래그는 CSRF(교차 사이트 요청 위조) 공격을 방지하는 데 유용합니다.

`쿠키의 종류`

- **세션 쿠키 (Session Cookie)**: 브라우저 세션이 종료되면 자동으로 삭제됩니다. 주로 로그인 상태와 같은 일시적인 정보를 저장하는 데 사용됩니다.

- **영구 쿠키 (Persistent Cookie)**: 만료 날짜가 설정된 쿠키로, 브라우저가 종료된 후에도 지정된 기간 동안 유지됩니다. 사용자의 설정이나 로그인 정보를 장기적으로 저장하는 데 사용됩니다.

- **서드 파티 쿠키 (Third-Party Cookie)**: 사용자가 방문한 웹 사이트와 다른 도메인에서 설정한 쿠키입니다. 주로 광고 및 트래킹 목적으로 사용됩니다.


`쿠키 기반 인증의 장단점`

| **장점**                                                   | **단점**                                                      |
|------------------------------------------------------------|---------------------------------------------------------------|
| **상태 유지**                                              | **서버 상태 관리**                                            |
| 서버가 세션 상태를 관리하여 사용자의 로그인 상태와 같은 정보를 쉽게 유지할 수 있습니다. | 세션 정보를 서버 메모리 또는 데이터베이스에 저장해야 하므로 서버에 부하가 발생할 수 있습니다. 이는 특히 확장성이 필요한 애플리케이션에서 문제가 될 수 있습니다. |
| **단순한 구현**                                            | **확장성**                                                    |
| 많은 웹 프레임워크와 서버가 세션 관리를 기본적으로 지원하므로 구현이 비교적 단순합니다. | 서버가 세션 상태를 유지해야 하기 때문에, 서버 간의 세션 동기화가 필요하며, 이는 분산 시스템에서 복잡성을 증가시킵니다. |
| **보안 기능**                                              | **세션 탈취**                                                 |
| 쿠키에 `HttpOnly`, `Secure`, `SameSite` 플래그를 설정하여 XSS(교차 사이트 스크립팅) 및 CSRF(교차 사이트 요청 위조) 공격을 방지할 수 있습니다. | 세션 ID가 탈취되면 공격자는 해당 세션을 가장하여 인증된 사용자로 행동할 수 있습니다. 따라서 세션 ID를 안전하게 관리하는 것이 중요합니다. |
| **자동 전송**                                              | **쿠키 크기 제한**                                            |
| 쿠키는 HTTP 요청 헤더에 자동으로 포함되어 서버로 전송되므로, 클라이언트 측에서 추가 작업이 필요 없습니다. | 쿠키의 크기 제한(일반적으로 4KB)은 저장할 수 있는 정보의 양을 제한합니다. 쿠키의 크기가 클수록 네트워크에 부하가 심해진다. |
|                                                            | **클라이언트 저장소 의존성**                                   |
|                                                            | 쿠키는 클라이언트의 브라우저에 저장되므로, 클라이언트가 쿠키를 삭제하거나 차단하면 인증이 제대로 동작하지 않을 수 있습니다. |



### 토큰이란?


### 차이점




> **참고**
>
> [쿠키란? - 클라우드플레어](https://www.cloudflare.com/ko-kr/learning/privacy/what-are-cookies/)
>
> [토큰 기반 인증이란? - 클라우드플레어](https://www.cloudflare.com/ko-kr/learning/access-management/token-based-authentication/)
>
> [JWT 토큰 인증이란?](https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-JWTjson-web-token-%EB%9E%80-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC)